### zookeeper

* 什么是RPC
```
RPC是远程过程调用，RPC是指计算机A上的进程，调用另外一台计算机B上的进程，其中A上的调用进程被挂起，而B上的呗调用进程开始执
行，当值返回给A时，A进程继续执行。

远程过程调用包含如下步骤:
    1:客户过程以正常的方式调用客户存根
    2:客户存根生成一个消息，然后调用本地操作系统
    3:客户端操作系统将消息发送给远程操作系统
    4:远程操作系统将消息交给服务器存根
    5:服务器存根调将参数取出来，而后调用服务器
    6:服务器执行要求的操作，操作完成后将结果返回给服务器存根
    7:服务器存根将结果打包成一个消息，而后调用本地操作系统
    8:服务器操作系统将含有结果的消息发送给客户端操作系统
    9:客户端操作系统将消息交给客户存根
    10:客户存根将结果从消息中提取出来，返回给调用它的客户存根
```

* zookeeper与paxos算法
```
zookeeper能做些什么：
1 命名服务
2：配置管理 
    q:如果程序分散部署在多台机器上，要改变配置变得困难
    a:保存在Zookeeper的某个目录节点中，然后所有相关应用程序对这个目录节点进行监听，一旦配置信息发生变化，每个应用程序就
    会受到Zookeeper的通知
3：集群管理
    q:
```

* 分布式事务管理
```
CAP定理：一致性，可用性，分区容错性
一致性协议：2PC与3PC
    2PC：是将事务的提交过程分成了两个阶段来进行处理
        阶段一:提交事务请求
            1.事务询问
            2.执行事务
            3.各参与者向协调者反馈事务询问的响应
        阶段二:执行事务提交
            1.发送提交请求：协调者向所有参与者节点发出Commit请求
            2.事务提交：参与者接受到Commit请求后，会正式执行事务提交操作
            3.反馈事务提交结果
            4.完成事务
            
    3PC：
    
    Paxos算法：一种基于消息传递且具有高度容错特性的一致性算法，是目前公认的解决分布式一致性问题
```

* 分布式日志收集系统
```
注册收集器机器:在Zookeeper上创建一个节点作为收集器的根节点 ，
每个收集器机器在启动的时候，都会在收集器节点下创建自己的节点

任务分发==》状态汇报==》动态分配
```

* Master选举
```

```

* 分布式锁
```
如果不同的系统或是同一个系统的不同主机之间共享了一个或一组资源，那么访问这些资源的时候，
往往需要通过一些互斥手段来防止彼此之间的干扰，以保证一致性
```

* 服务的路由和负载均衡
```
负载均衡：指由多台服务器以对称的方式组成一个服务器集合，每台服务器都具有等价的地位，都可以单独对外提供服务而无须其他服务
器的辅助

路由和负载均衡的实现：一旦服务器与ZooKeeper集群断开连接，节点也就不存在了，通过注册相应的watcher，
服务消费者能够第一时间获知服务提供者机器信息的变更。利用其znode的特点和watcher机制，将其作为动态注册
和获取服务信息的配置中心，统一管理服务名称和其对应的服务器列表信息，
```

* 使用zookepper和rmi实现远程调用
```

```